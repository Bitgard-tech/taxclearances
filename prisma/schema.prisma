generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
}

enum VehicleStatus {
  AVAILABLE
  SOLD
}

enum ExpenseCategory {
  REPAIR
  BROKER_FEE
  TRAVEL
  DOCUMENTATION
  OTHER
}

model Vehicle {
  id            String    @id @default(uuid())
  vin           String?   @unique
  regNumber     String    @unique
  make          String
  model         String
  year          Int
  status        VehicleStatus @default(AVAILABLE)

  purchasePrice Decimal
  purchaseDate  DateTime
  soldPrice     Decimal?
  soldDate      DateTime?
  
  profitMargin  Decimal   @default(15.0)

  images        String[]
  
  createdAt     DateTime  @default(now())

  expenses      Expense[]
  
  @@map("vehicles")
}

model Expense {
  id          String         @id @default(uuid())
  vehicleId   String
  vehicle     Vehicle        @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  description String
  amount      Decimal
  date        DateTime
  category    ExpenseCategory
  isPublic    Boolean        @default(false)

  @@map("expenses")
}


model Customer {
  id      String @id @default(uuid())
  name    String
  phone   String
  nic     String @unique

  @@map("customers")
}

model DealerProfile {
  id          String   @id @default(uuid())
  companyName String   @default("Bitgard")
  address     String   @default("")
  phone       String   @default("")
  email       String   @default("")
  
  updatedAt   DateTime @updatedAt
  
  @@map("dealer_profile")
}
